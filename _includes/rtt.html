<style>
    table {
        width: 100%;
    }
</style>


<script src="{{ site.baseurl }}/public/js/jquery.min.js"></script>
<script src="{{ site.baseurl }}/public/js/d3.v3.min.js"></script>
<script src="{{ site.baseurl }}/public/js/phylo.js"></script>


<table>
    <tr>
        <td>
            <div id="unrooted"></div>
        </td>
        <td>
            <div id="rooted"></div>
        </td>
        <td>
            <div id="regression"></div>
        </td>
    </tr>
</table>

    
<script>   
    var margin = {top: 10, right: 10, bottom: 10, left: 10},
        width = 300, 
        height = 300,
        svg = d3.select("div#unrooted")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g");
    
    // set up plotting scales
    var xValue = function(d) { return d.x; },
        xScale = d3.scale.linear().range([0, width]),
        xMap = function(d) { return xScale(xValue(d)); },
        xMap1 = function(d) { return xScale(d.x1); },
        xMap2 = function(d) { return xScale(d.x2); },
        xAxis = d3.svg.axis().scale(xScale).orient("bottom");
    
    var yValue = function(d) { return d.y; },
        yScale = d3.scale.linear().range([height, 0]),
        yMap = function(d) { return yScale(yValue(d)); },
        yMap1 = function(d) { return yScale(d.y1); },
        yMap2 = function(d) { return yScale(d.y2); },
        yAxis = d3.svg.axis().scale(yScale).orient("left");
    
    var tree = readTree(example);
    equalAngleLayout(tree);

    var data = fortify(tree),
        edgeset = edges(data);

    // add buffer to data domain
    xScale.domain([
        d3.min(data, xValue)-1, d3.max(data, xValue)+1
    ])
    yScale.domain([
        d3.min(data, yValue)-1, d3.max(data, yValue)+1
    ])

    // draw x-axis
    svg.append("g")
       .attr("class", "x axis")
       .attr("transform", "translate(0," + height + ")")
       .call(xAxis);
    
    // draw y-axis
    svg.append("g")
       .attr("class", "y axis")
       .call(yAxis);
    
    // draw points
    svg.selectAll(".dot")
       .data(data)
       .enter().append("circle")
       .attr("class", "dot")
       .attr("r", 2)
       .attr("cx", xMap)
       .attr("cy", yMap);
    
    // draw lines
    svg.selectAll("lines")
       .data(edgeset)
       .enter().append("line")
       .attr("class", "lines")
       .attr("x1", xMap1)
       .attr("y1", yMap1)
       .attr("x2", xMap2)
       .attr("y2", yMap2)
       .attr("stroke-width", 2)
       .attr("stroke", "#00000040");



</script>
